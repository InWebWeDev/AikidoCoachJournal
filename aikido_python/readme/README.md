# API Endpoints v1

## Авторизация:

адрес: /auth/token/login/ 

запрос POST, формат form-data

username: {username}

password: {password}
![img.png](img.png)

ответ: json формата

    {
        "auth_token": "c30422190dc01ff8fc95f66e1a5e6b15a74da400"
    }

токен используется в заголовке Authorization для аутентификации

![img_1.png](img_1.png)

## Профили

адрес:

/api/users/ - получение всех пользователей, создание пользователей (только для админ-аккаунтов)

/api/users/{username}/ - олучение и редактирование профиля (для не админов - только своего)

Формат:

    {
        "id": 5,
        "username": "u2",
        "first_name": "",
        "last_name": "",
        "third_name": "",
        "phone_number": 88889,
        "email": "u2@m.com",
        "birth_date": null,
        "groups": [
            1,
            3
        ]
    }

## Расписание

/api/trainings/?date_from=2023-12-08&date_to=2023-12-15 - формат запроса для получения тренировок за указанный период (рамки включительно)
возвратит все тренировки, если период не указан

Формат ответа:

    [
        {
            "id": 1,
            "date": "2023-12-09",
            "start_time": "16:00:00",
            "end_time": "17:30:00",
            "price": 300,
            "group": 1,
            "users": [
                4,
                4,
                4,
                5
            ]
        },
        {
            "id": 2,
            "date": "2023-12-09",
            "start_time": "18:00:00",
            "end_time": "20:30:00",
            "price": 400,
            "group": 1,
            "users": [
                5
            ]
        }
    ]

/api/trainings/control/ - для редактирования админами


## Группы

/api/group/{group_id}/users/ - получение всех пользователей группы

## Посещения


/api/my-attendances/?date_from=2023-12-08&date_to=2023-12-15 - формат запроса для получения своих посещений за указанный период (рамки включительно)

возвратит все посещения, если период не указан

/api/attendances/user/{user_id}/ - получение всех тренировок пользователя. Так же можно аналогично указать период

/api/attendances/ - для админов. Просмотр и редактирование записей о посещениях


